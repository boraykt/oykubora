<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Mesaj BÄ±rak</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/png" href="heart.png">
</head>
<body class="dark">

<div class="side-menu">
  <h2>MENÃœ</h2>
  <nav>
    <a href="index.html">Ana Sayfa</a>
    <a href="galeri.html">FotoÄŸraflar</a>
    <a href="mesaj.html">Mesaj BÄ±rak</a>
    <a href="anilar.html">AnÄ±larÄ±mÄ±z</a>
    <a href="mesajlar.html">Mesajlar</a>
    <a href="sonsuzluk.html">Sonsuzluk</a>
  </nav>
</div>

<div class="page-content">
  <h1>Bir Mesaj BÄ±rak</h1>

  <input 
    type="text" 
    id="isimInput" 
    placeholder="AdÄ±n"
    style="width:100%; padding:12px; margin-bottom:15px; background:#111; border:1px solid #444; color:white; border-radius:10px;"
  >

  <textarea 
    id="mesajInput" 
    placeholder="Kalbinden geÃ§enleri yaz..."
  ></textarea>

  <button onclick="mesajKaydet()">GÃ¶nder</button>
</div>

<script>
function mesajKaydet(){
  let isim = document.getElementById("isimInput").value.trim();
  let mesaj = document.getElementById("mesajInput").value.trim();

  if(isim === "" || mesaj === ""){
    alert("Ä°sim ve mesaj boÅŸ olamaz â¤ï¸");
    return;
  }

  let mesajlar = JSON.parse(localStorage.getItem("mesajlar")) || [];

  mesajlar.push({
    isim: isim,
    text: mesaj,
    tarih: new Date().toLocaleString()
  });

  localStorage.setItem("mesajlar", JSON.stringify(mesajlar));

  document.getElementById("isimInput").value = "";
  document.getElementById("mesajInput").value = "";

  alert("Mesaj kaydedildi ğŸ’Œ");
}
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyC15_7m7NfYUBkrNWp9uDqw7n3IePBoE2s",
    authDomain: "oykubora-bdf60.firebaseapp.com",
    projectId: "oykubora-bdf60",
    storageBucket: "oykubora-bdf60.firebasestorage.app",
    messagingSenderId: "441769060401",
    appId: "1:441769060401:web:0a862d2e446c2458e3cd10",
    measurementId: "G-HRVVBXNKZP"
  };

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ğŸ”¥ HER MÃœÅTERÄ°YE Ã–ZEL */
const siteID = "bora-oyku"; 

const form = document.getElementById("mesajForm");

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const isim = document.getElementById("isim").value;
  const mesaj = document.getElementById("mesaj").value;

  await addDoc(collection(db, "mesajlar"), {
    siteID: siteID,
    isim: isim,
    mesaj: mesaj,
    tarih: new Date()
  });

  alert("Mesaj gÃ¶nderildi ğŸ’—");
  form.reset();
});
</script>

</body>
</html>

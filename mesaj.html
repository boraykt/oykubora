<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Mesaj BÄ±rak</title>

<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/png" href="heart.png">

<div class="side-menu">
  <h2>MENÃœ</h2>
  <nav>
    <a href="index.html">Ana Sayfa</a>
    <a href="galeri.html">FotoÄŸraflar</a>
    <a href="mesaj.html">Mesaj BÄ±rak</a>
    <a href="anilar.html">AnÄ±larÄ±mÄ±z</a>
    <a href="mesajlar.html">Mesajlar</a>
    <a href="sonsuzluk.html">Sonsuzluk</a>
  </nav>
</div>

<style>
body {
  background:#0d0d0d;
  color:white;
  font-family: Arial, sans-serif;
}

.page-content {
  max-width: 500px;
  margin: 80px auto;
  padding: 20px;
}

input, textarea {
  width:100%;
  padding:12px;
  margin-bottom:15px;
  background:#111;
  border:1px solid #444;
  color:white;
  border-radius:10px;
}

button {
  width:100%;
  padding:12px;
  background:#e63946;
  color:white;
  border:none;
  border-radius:10px;
  font-size:16px;
  cursor:pointer;
}

button:hover {
  background:#ff4d5a;
}
</style>
</head>

<body>

<div class="page-content">
  <h1>ğŸ’Œ Bir Mesaj BÄ±rak</h1>

  <form id="mesajForm">
    <input type="text" id="isim" placeholder="AdÄ±n" required>
    <textarea id="mesaj" rows="4" placeholder="Kalbinden geÃ§enleri yaz..." required></textarea>
    <button onclick="mesajGonder()">GÃ¶nder</button>
  </form>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyC15_7m7NfYUBkrNWp9uDqw7n3IePBoE2s",
  authDomain: "oykubora-bdf60.firebaseapp.com",
  projectId: "oykubora-bdf60"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.mesajGonder = async function () {
  const isim = document.getElementById("isimInput").value.trim();
  const mesaj = document.getElementById("mesajInput").value.trim();

  if (!isim || !mesaj) {
    alert("Ä°sim ve mesaj boÅŸ olamaz â¤ï¸");
    return;
  }

  // ğŸ” GÄ°ZLÄ° SÄ°LME KODU
  const silmeKodu = Math.random().toString(36).substring(2, 10);

  await addDoc(collection(db, "mesajlar"), {
    siteID: "bora-oyku",
    isim: isim,
    mesaj: mesaj,
    silmeKodu: silmeKodu,
    tarih: serverTimestamp()
  });

  alert(
    "Mesaj gÃ¶nderildi ğŸ’Œ\n\n" +
    "âš ï¸ Bu mesajÄ± silmek iÃ§in kodun:\n" +
    silmeKodu +
    "\n\nBu kodu sakla!"
  );

  document.getElementById("isimInput").value = "";
  document.getElementById("mesajInput").value = "";
};
</script>


</body>
</html>

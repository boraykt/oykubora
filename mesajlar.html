<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>MesajlarÄ±mÄ±z</title>

<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/png" href="heart.png">

<style>
body {
  background:#0d0d0d;
  color:white;
  font-family: Arial, sans-serif;
}

.page-content {
  max-width: 700px;
  margin: 60px auto;
  padding: 20px;
}

.mesaj {
  background:#111;
  padding:15px;
  margin-bottom:15px;
  border-radius:10px;
  border:1px solid #333;
}

.mesaj h3 {
  margin:0 0 5px;
  color:#ff6b81;
}

.mesaj span {
  font-size:12px;
  color:#aaa;
}

#loading {
  text-align:center;
  margin-top:40px;
  color:#aaa;
}
</style>
</head>

<body>

<div class="page-content">
  <h1>ðŸ’– MesajlarÄ±mÄ±z</h1>
  <div id="loading">MesajlarÄ±mÄ±z yÃ¼kleniyor...</div>
  <div id="mesajListesi"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyC15_7m7NfYUBkrNWp9uDqw7n3IePBoE2s",
  authDomain: "oykubora-bdf60.firebaseapp.com",
  projectId: "oykubora-bdf60"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const mesajListesi = document.getElementById("mesajListesi");
const loading = document.getElementById("loading");

async function mesajlariGetir() {
  try {
    const q = query(
      collection(db, "mesajlar"),
      where("siteID", "==", "bora-oyku")
    );

    const snapshot = await getDocs(q);

    loading.style.display = "none";

    if (snapshot.empty) {
      mesajListesi.innerHTML = "<p>HenÃ¼z mesaj yok ðŸ’”</p>";
      return;
    }

    snapshot.forEach(doc => {
      const data = doc.data();

      const div = document.createElement("div");
      div.className = "mesaj";
      div.innerHTML = `
        <h3>${data.isim}</h3>
        <p>${data.mesaj}</p>
        <span>${new Date(data.tarih.seconds * 1000).toLocaleString()}</span>
      `;

      mesajListesi.appendChild(div);
    });

  } catch (err) {
    loading.innerText = "Mesajlar yÃ¼klenemedi ðŸ˜¢";
    console.error(err);
  }
}

mesajlariGetir();
</script>


</body>
</html>

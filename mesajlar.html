<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Mesajlarımız</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/png" href="heart.png">
</head>

<body class="dark">

<div class="side-menu">
  <h2>MENÜ</h2>
  <nav>
    <a href="index.html">Ana Sayfa</a>
    <a href="galeri.html">Fotoğraflar</a>
    <a href="mesaj.html">Mesaj Bırak</a>
    <a href="anilar.html">Anılarımız</a>
    <a href="mesajlar.html">Mesajlar</a>
    <a href="sonsuzluk.html">Sonsuzluk</a>
  </nav>
</div>

<div class="page-content">
  <h1>Mesajlarımız</h1>
  <div id="mesajListesi"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import {
  getFirestore,
  collection,
  getDocs,
  query,
  where,
  orderBy
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

document.addEventListener("DOMContentLoaded", async () => {

  const firebaseConfig = {
    apiKey: "AIzaSyC15_7m7NfYUBkrNWp9uDqw7n3IePBoE2s",
    authDomain: "oykubora-bdf60.firebaseapp.com",
    projectId: "oykubora-bdf60",
    storageBucket: "oykubora-bdf60.appspot.com",
    messagingSenderId: "441769060401",
    appId: "1:441769060401:web:0a862d2e446c2458e3cd10"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const siteID = "bora-oyku";
  const container = document.getElementById("mesajListesi");

  container.innerHTML = "<p>Yükleniyor…</p>";

  const q = query(
    collection(db, "mesajlar"),
    where("siteID", "==", siteID),
    orderBy("tarih", "desc")
  );

  const snapshot = await getDocs(q);

  if (snapshot.empty) {
    container.innerHTML = "<p>Henüz mesaj yok ❤️</p>";
    return;
  }

  container.innerHTML = "";

  snapshot.forEach(doc => {
    const data = doc.data();

    container.innerHTML += `
      <div class="memory">
        <strong>${data.isim}</strong>
        <p>${data.mesaj}</p>
      </div>
    `;
  });

});
</script>

</body>
</html>
